# Quarkus configuration (YAML)
quarkus:
  http:
    port: ${PORT:8080}
    root-path: "/"
    cors:
      origins: "*"
      headers: "accept, authorization, content-type, x-requested-with"
      methods: "GET, POST, PUT, DELETE, OPTIONS"
  smallrye-openapi:
    path: "/q/openapi"
  swagger-ui:
    always-include: true
  smallrye-health:
    root-path: "/q/health"
  log:
    console:
      json: false
  datasource:
    db-kind: postgresql
    username: ${DB_USERNAME:neondb_owner}
    password: ${DB_PASSWORD:npg_GMfXtR8H2nkK}
    jdbc:
      url: ${DATABASE_URL:jdbc:postgresql://ep-flat-feather-a1vmt3a1-pooler.ap-southeast-1.aws.neon.tech/vno?sslmode=require&channelBinding=require}
      max-size: 20
      min-size: 5
      acquisition-timeout: 10s
      idle-removal-interval: 5m
  flyway:
    migrate-at-start: true
  redis:
    hosts: ${REDIS_URL:redis://localhost:6379}
  hibernate-orm:
    database:
      generation: none
  # OIDC for Google OAuth
  oidc:
    enabled: true
    auth-server-url: https://accounts.google.com
    client-id: ${GOOGLE_CLIENT_ID:MY_CLIENT_ID}
    client-secret: ${GOOGLE_CLIENT_SECRET:MY_CLIENT_SECRET}
    application-type: web-app
    credentials:
      secret: ${GOOGLE_CLIENT_SECRET:MY_CLIENT_SECRET}

# JWT Configuration
mp:
  jwt:
    verify:
      publickey:
        location: none
      issuer: vno-backend
    sign:
      key-location: none

smallrye:
  jwt:
    sign:
      key: ${JWT_SIGN_KEY:dev-secret-key-change-in-production}

# App domain for subdomain parsing
app:
  domain: ${APP_DOMAIN:vno.com}
  jwt:
    secret: ${JWT_SIGN_KEY:dev-secret-key-change-in-production}
    expiry-hours: 168

# Resend API
resend:
  api-key: ${RESEND_API_KEY:re_dev_placeholder_key}
  from-email: ${RESEND_FROM_EMAIL:noreply@vno.com}

# Enable CORS (flattened key)
"quarkus.http.cors": true

