# Quarkus configuration (YAML)
quarkus:
  http:
    port: ${PORT:8080}
    root-path: "/"
    cors:
      ~: true
      origins: "*"
      methods: "*"
      headers: "*"
      exposed-headers: "*"
      access-control-max-age: 24H
  
  smallrye-openapi:
    path: "/q/openapi"
    info-title: "VNO Backend API"
    info-version: "1.0.0"
    info-description: "VNO Backend API with Bearer Token Authentication"
  swagger-ui:
    always-include: true
    theme: "outline"
    persist-authorization: true
    ui-header: "VNO Backend API - Swagger UI"
  smallrye-health:
    root-path: "/q/health"
    
  log:
    console:
      json: false
    category:
      "io.smallrye.jwt":
        level: DEBUG
      "io.quarkus.smallrye.jwt":
        level: DEBUG

  datasource:
    db-kind: postgresql
    username: ${DB_USERNAME:neondb_owner}
    password: ${DB_PASSWORD:npg_GMfXtR8H2nkK}
    # Reactive PostgreSQL client
    reactive:
      url: ${DATABASE_REACTIVE_URL:postgresql://ep-flat-feather-a1vmt3a1-pooler.ap-southeast-1.aws.neon.tech/vno?sslmode=require}
      max-size: 20
    # JDBC still needed for Flyway migrations
    jdbc:
      url: ${DATABASE_URL:jdbc:postgresql://ep-flat-feather-a1vmt3a1-pooler.ap-southeast-1.aws.neon.tech/vno?sslmode=require&channelBinding=require}
  
  flyway:
    migrate-at-start: true
    
  redis:
    hosts: ${REDIS_URL:redis://localhost:6379}
    
  hibernate-orm:
    database:
      generation: none
    mapping:
      format:
        global: ignore

  # OIDC for Google OAuth
  oidc:
    enabled: true
    auth-server-url: https://accounts.google.com
    client-id: ${GOOGLE_CLIENT_ID:MY_CLIENT_ID}
    credentials:
      secret: ${GOOGLE_CLIENT_SECRET:MY_CLIENT_SECRET}
    application-type: web-app
    authentication:
      redirect-path: /auth/google/callback
      scopes: openid,email,profile
  smallrye-jwt:
    enabled: true
    
# MicroProfile JWT Configuration
mp:
  jwt:
    verify:
      issuer: vno-backend

# App domain for subdomain parsing
app:
  domain: ${APP_DOMAIN:vno.com}
  jwt:
    access-token-expiry-minutes: 15  # Short-lived access tokens (15 minutes)
    refresh-token-expiry-days: 7     # Long-lived refresh tokens (7 days)

# Resend Email Service Configuration
resend:
  api-key: ${RESEND_API_KEY:re_8GvmMDRp_9hGBUY3bhACkdrozRTzyc1cs}
  from-email: ${RESEND_FROM_EMAIL:vno-back-end.fly.dev}
  from-name: ${RESEND_FROM_NAME:VNO}
